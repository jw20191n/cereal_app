<h1><%= @cereal.name %></h1> 
<h3>Owner: <%= @cereal.user.name %></h3>
<h3>Current Amount: <%= @cereal.amount %> cups </h3>
<% if @cereal.img_url %>
    <%= image_tag @cereal.img_url  %>
<% end %>

<!-- <% if @cereal.user_id == session[:user_id] %>
     <%= button_to "edit", edit_cereal_path, method: :get  %>
<% else %> -->

    
    <% @user = User.find(session[:user_id]) %>
    <% if @user.total > 0  %>
        
        <%= form_for @transaction do |f| %>
        <%= f.label :amount %>
        <input type="range" min="1" max=<%= @user.total < @cereal.amount ? @user.total : @cereal.amount %> value = "1" name = "transaction[amount]"  id="amount">
        <div id="append_value"></div>
        <%= f.hidden_field :user_id, value: session[:user_id] %>
        <%= f.hidden_field :cereal_id, value: @cereal.id %>
        <%= f.submit %>
        <% end %>
    <% else %>
        <h3>You can not take from other's cereal box. Please bring more cereal to the platform.</h3>
    <% end %>
   
    <!-- <% end %> -->

<% @comments.each do |comment| %>
    <p><%= comment.content %> -<%= comment.user.username %></p>
<% end %>
<% if session[:user_id] %>
    <%= form_for @comment do |f| %>
    <%= f.label :content %>
    <%= f.text_field :content%>
    <%= f.hidden_field :cereal_id, value: @cereal.id %>
    <%= f.hidden_field :user_id, value: session[:user_id] %>
    <%= f.submit %>
    <% end %>
<% end %>

<script>
        var trans_value = document.getElementById("amount"); 
        var output = document.getElementById("append_value");
        output.innerHTML = trans_value.value; 

        trans_value.oninput = function() {
            if (this.value != null) {
                output.innerHTML = this.value;
            }  
        }
</script>